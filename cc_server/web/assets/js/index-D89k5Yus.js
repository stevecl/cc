import{Q as ut,r as x,R as q,o as F,e as p,f as v,F as M,g as U,k as a,t as C,S as B,l as T,T as dt,d as E,h as c,w as h,y as H,A as z,s as N,v as G,q as S,z as mt,i as J,j as Q,b as W,E as X,U as ct,H as rt,V as pt,u as ft,B as vt,W as bt,n as ht}from"./index-DEqbzUmX.js";import{a as d,_ as D,b as Y,c as Z,d as ee,e as te,f as se,g as ae,h as oe,i as ne,j as le,k as ie,l as ge,m as _e,n as ue,o as de,p as me,q as ce,r as re,s as pe,t as fe,u as ve,v as be,w as he,x as Ee,y as ke,z as ye,A as Ce,B as Ie,C as Te,D as De,E as Oe,F as we,G as Ve,H as xe,I as Re,J as $e,K as Le,L as je,M as Pe,N as Ae,O as Me,P as Se,Q as Be,R as Ne,S as Ge,T as Ue,U as He,V as ze,W as Ke,X as qe,Y as Fe,Z as Je,$ as Qe,a0 as We,a1 as Xe,a2 as Ye,a3 as Ze,a4 as et,a5 as tt,a6 as st,a7 as at,a8 as ot,a9 as nt,aa as lt,ab as it,ac as I,ad as Et}from"./index-BYTKi1BI.js";import{a as kt,b as yt}from"./diyPage-YbQvMC1V.js";const gt=ut("common",()=>{const e=x({}),m=Object.assign({"../material/assistBlank/config.js":()=>d(()=>import("./config-6mH-mRtp.js"),[],import.meta.url),"../material/assistLine/config.js":()=>d(()=>import("./config-DVat-B7F.js"),[],import.meta.url),"../material/buttons/config.js":()=>d(()=>import("./config-BBT0i4kK.js"),[],import.meta.url),"../material/floatButtons/config.js":()=>d(()=>import("./config-MJyAnOlG.js"),[],import.meta.url),"../material/goods/config.js":()=>d(()=>import("./config-DNdpgWls.js"),[],import.meta.url),"../material/goodsLikes/config.js":()=>d(()=>import("./config-CxGGstuq.js"),[],import.meta.url),"../material/goodsRanking/config.js":()=>d(()=>import("./config-FkYGNhZh.js"),[],import.meta.url),"../material/goodsScore/config.js":()=>d(()=>import("./config-DBIqUa65.js"),[],import.meta.url),"../material/goodsTabbar/config.js":()=>d(()=>import("./config-CxU5YkRA.js"),[],import.meta.url),"../material/listMenu/config.js":()=>d(()=>import("./config-BxseHsg4.js"),[],import.meta.url),"../material/pictureShow/config.js":()=>d(()=>import("./config-6Wcal7An.js"),[],import.meta.url),"../material/search/config.js":()=>d(()=>import("./config-C30tfaZA.js"),[],import.meta.url),"../material/singleChart/config.js":()=>d(()=>import("./config-BNSu0uJk.js"),[],import.meta.url),"../material/swiper/config.js":()=>d(()=>import("./config-CpybwYZo.js"),[],import.meta.url),"../material/tabbar/config.js":()=>d(()=>import("./config-Bjxhfm_1.js"),[],import.meta.url),"../material/title/config.js":()=>d(()=>import("./config-CiNPRnwn.js"),[],import.meta.url),"../material/video/config.js":()=>d(()=>import("./config-DPJ3dUps.js"),[],import.meta.url)});return Object.keys(m).forEach(async o=>{let i=o.replace(/\/config.js/,"").replace(/.*\//,"");e.value[i]={name:i,componentName:"diy-"+i,configComponent:"conf-"+i,getDefaultConfig:m[o]}}),{materialDatas:e}}),_t=[{name:"商品类",data:[{name:"商品组",icon:"goods.png",component:"goods"},{name:"选项卡",icon:"tabbar.png",component:"goodsTabbar"},{name:"猜你喜欢",icon:"guess.png",component:"goodsLikes"},{name:"商品排行",icon:"goodsRanking.png",component:"goodsRanking"},{name:"积分商城",icon:"creditshop.png",component:"goodsScore"}]},{name:"图文类 ",data:[{name:"搜索框",icon:"search.png",component:"search"},{name:"图片轮播",icon:"banner.png",component:"swiper"},{name:"图片(热区)",icon:"picture.png",component:"singleChart"},{name:"图片展播",icon:"pictures.png",component:"pictureShow"},{name:"列表导航",icon:"listmenu.png",component:"listMenu"},{name:"辅助线",icon:"line.png",component:"assistLine"},{name:"标题栏",icon:"title.png",component:"title"},{name:"辅助空白",icon:"blank.png",component:"assistBlank"},{name:"按钮组",icon:"menu.png",component:"buttons"},{name:"视频播放",icon:"video.png",component:"video"},{name:"浮动按钮",icon:"float.png",component:"floatButtons"}]}],Ct={class:"module-select-box"},It={class:"module-list_type"},Tt={class:"module-list_data"},Dt=["onClick"],Ot={class:"title"},wt={__name:"materialPanel",emits:["add","global"],setup(e,{emit:m}){const{materialDatas:o}=gt(),i=m;q("baseInfo");const s=t=>({backgroundImage:`url(${new URL(Object.assign({"../../assets/images/default/audio.png":Y,"../../assets/images/default/banner.png":Z,"../../assets/images/default/bannerGoods.png":ee,"../../assets/images/default/bargain.png":te,"../../assets/images/default/blank.png":se,"../../assets/images/default/car1.png":ae,"../../assets/images/default/car2.png":oe,"../../assets/images/default/car3.png":ne,"../../assets/images/default/car4.png":le,"../../assets/images/default/channelvideo.png":ie,"../../assets/images/default/copyright.png":ge,"../../assets/images/default/countdown.png":_e,"../../assets/images/default/coupon.png":ue,"../../assets/images/default/couponbag.png":de,"../../assets/images/default/course.png":me,"../../assets/images/default/creditshop.png":ce,"../../assets/images/default/creditsign.png":re,"../../assets/images/default/cube.png":pe,"../../assets/images/default/default_banner.png":fe,"../../assets/images/default/default_btn1.png":ve,"../../assets/images/default/default_btn2.png":be,"../../assets/images/default/default_btn3.png":he,"../../assets/images/default/default_btn4.png":Ee,"../../assets/images/default/default_img.jpg":ke,"../../assets/images/default/default_picture.png":ye,"../../assets/images/default/default_video.png":Ce,"../../assets/images/default/fixedsearch.png":Ie,"../../assets/images/default/float.png":Te,"../../assets/images/default/form.png":De,"../../assets/images/default/giftcard.png":Oe,"../../assets/images/default/goods,list.png":we,"../../assets/images/default/goods,one.png":Ve,"../../assets/images/default/goods.png":xe,"../../assets/images/default/goodsRanking.png":Re,"../../assets/images/default/groups.png":$e,"../../assets/images/default/groupscashback.png":Le,"../../assets/images/default/guess.png":je,"../../assets/images/default/guide.png":Pe,"../../assets/images/default/home-b.png":Ae,"../../assets/images/default/hotel.png":Me,"../../assets/images/default/lecturer.png":Se,"../../assets/images/default/line.png":Be,"../../assets/images/default/listmenu.png":Ne,"../../assets/images/default/live.png":Ge,"../../assets/images/default/menu.png":Ue,"../../assets/images/default/note.png":He,"../../assets/images/default/notice.png":ze,"../../assets/images/default/otherGoods,three.png":Ke,"../../assets/images/default/otherGoods,three2.png":qe,"../../assets/images/default/otherGoods,three3.png":Fe,"../../assets/images/default/picture.png":Je,"../../assets/images/default/pictures.png":Qe,"../../assets/images/default/presell.png":We,"../../assets/images/default/richtext.png":Xe,"../../assets/images/default/room.png":Ye,"../../assets/images/default/search.png":Ze,"../../assets/images/default/seckill.png":et,"../../assets/images/default/tabbar.png":tt,"../../assets/images/default/title.png":st,"../../assets/images/default/title3.png":at,"../../assets/images/default/twoGoods,list2.png":ot,"../../assets/images/default/twoGoods,two.png":nt,"../../assets/images/default/video.png":lt,"../../assets/images/default/wxlive.png":it})[`../../assets/images/default/${t}`],import.meta.url).href})`});return F(async()=>{if(Object.keys(o).some(t=>!o[t].title))for(const t in o){let n=(await o[t].getDefaultConfig()).default;o[t].title=n.title,o[t].defConfig=n,delete o[t].getDefaultConfig}}),(t,n)=>(p(),v("div",Ct,[(p(!0),v(M,null,U(T(_t),(g,r)=>(p(),v("div",{class:"module-list",key:r},[a("div",It,C(g.name)+"("+C(g.data.length)+")",1),a("div",Tt,[(p(!0),v(M,null,U(g.data,(u,k)=>(p(),v("div",{class:"module-list_data_item",style:B(s(u.icon)),key:"c_"+k,onClick:O=>i("add",T(o)[u.component])},[a("p",Ot,C(u.name),1)],12,Dt))),128))])]))),128))]))}},Vt=D(wt,[["__scopeId","data-v-f58a68e4"]]),xt={class:"phone-wrapper"},Rt={class:"diy-phone"},$t={class:"phone_title"},Lt={__name:"renderEngine",props:{pageConfig:Object},emits:["select"],setup(e,{emit:m}){const o=m;return(i,s)=>(p(),v("div",xt,[a("div",Rt,[a("div",{class:"text-overflow phone-header",onClick:s[0]||(s[0]=t=>o("select"))},[a("div",$t,C(e.pageConfig.templateTitle),1)]),a("div",{class:"custom-scroll-bar phone-body",style:B({"background-color":e.pageConfig.backgroundColor})},[dt(i.$slots,"default",{},void 0,!0)],4)])]))}},jt=D(Lt,[["__scopeId","data-v-06ef4988"]]),R=e=>(N("data-v-02575c21"),e=e(),G(),e),Pt=R(()=>a("div",{class:"module-edit-title"},"页面设置",-1)),At=R(()=>a("p",{class:"tips-info"},"注意：页面名称是便于后台查找。",-1)),Mt=R(()=>a("div",{class:"tips-info",style:{margin:"-10px 0 10px 78px"}},"建议尺寸256 * 414 (大小建议不超过800k，以免影响加载速度)",-1)),St=R(()=>a("div",{class:"diy-edit-line"},null,-1)),Bt={__name:"pageSet",props:{config:Object},setup(e){const m=e,o=()=>Bus.emit("selectImage",i=>m.config.images=i.url);return(i,s)=>{const t=E("el-input"),n=E("configItem"),g=E("selectColor"),r=E("el-image");return p(),v("div",null,[Pt,c(n,{label:"页面名称",style:{"margin-bottom":"20px"}},{default:h(()=>[c(t,{class:"flex-full",maxlength:12,modelValue:e.config.templateName,"onUpdate:modelValue":s[0]||(s[0]=u=>e.config.templateName=u),placeholder:"请输入页面名称"},null,8,["modelValue"]),At]),_:1}),c(n,{label:"页面标题"},{default:h(()=>[c(t,{class:"flex-full",modelValue:e.config.templateTitle,"onUpdate:modelValue":s[1]||(s[1]=u=>e.config.templateTitle=u),placeholder:"请输入页面标题"},null,8,["modelValue"])]),_:1}),c(n,{label:"页面背景"},{default:h(()=>[c(g,{modelValue:e.config.backgroundColor,"onUpdate:modelValue":s[2]||(s[2]=u=>e.config.backgroundColor=u),resetColor:"#ededed"},null,8,["modelValue"])]),_:1}),c(n,{label:"封面图",isRequire:!0},{default:h(()=>[a("div",{class:"upload-image",onClick:o},[H(c(r,{src:e.config.templateImg},null,8,["src"]),[[z,e.config.templateImg]]),H(a("span",null,"+",512),[[z,!e.config.templateImg]])])]),_:1}),Mt,St])}}},Nt=D(Bt,[["__scopeId","data-v-02575c21"]]),$=e=>(N("data-v-cf49f297"),e=e(),G(),e),Gt={class:"diy-edit-box"},Ut={class:"header-info"},Ht={class:"title"},zt=["src"],Kt=$(()=>a("span",{class:"iconfont icon-fuzhi1"},null,-1)),qt=$(()=>a("span",null,"复制",-1)),Ft=[Kt,qt],Jt=$(()=>a("span",{class:"iconfont icon-shanchu2"},null,-1)),Qt=$(()=>a("span",null,"删除",-1)),Wt=[Jt,Qt],Xt={class:"custom-scroll-bar edit-config-module"},Yt={__name:"configPanel",props:{activeItem:Object},emits:["copy","delete"],setup(e,{emit:m}){let o=_t.reduce((n,g)=>[...n,...g.data],[]);const i=m,s=q("baseInfo"),t=n=>{var r;let g=(r=o.filter(u=>u.component===n)[0])==null?void 0:r.icon;return new URL(Object.assign({"../../assets/images/default/audio.png":Y,"../../assets/images/default/banner.png":Z,"../../assets/images/default/bannerGoods.png":ee,"../../assets/images/default/bargain.png":te,"../../assets/images/default/blank.png":se,"../../assets/images/default/car1.png":ae,"../../assets/images/default/car2.png":oe,"../../assets/images/default/car3.png":ne,"../../assets/images/default/car4.png":le,"../../assets/images/default/channelvideo.png":ie,"../../assets/images/default/copyright.png":ge,"../../assets/images/default/countdown.png":_e,"../../assets/images/default/coupon.png":ue,"../../assets/images/default/couponbag.png":de,"../../assets/images/default/course.png":me,"../../assets/images/default/creditshop.png":ce,"../../assets/images/default/creditsign.png":re,"../../assets/images/default/cube.png":pe,"../../assets/images/default/default_banner.png":fe,"../../assets/images/default/default_btn1.png":ve,"../../assets/images/default/default_btn2.png":be,"../../assets/images/default/default_btn3.png":he,"../../assets/images/default/default_btn4.png":Ee,"../../assets/images/default/default_img.jpg":ke,"../../assets/images/default/default_picture.png":ye,"../../assets/images/default/default_video.png":Ce,"../../assets/images/default/fixedsearch.png":Ie,"../../assets/images/default/float.png":Te,"../../assets/images/default/form.png":De,"../../assets/images/default/giftcard.png":Oe,"../../assets/images/default/goods,list.png":we,"../../assets/images/default/goods,one.png":Ve,"../../assets/images/default/goods.png":xe,"../../assets/images/default/goodsRanking.png":Re,"../../assets/images/default/groups.png":$e,"../../assets/images/default/groupscashback.png":Le,"../../assets/images/default/guess.png":je,"../../assets/images/default/guide.png":Pe,"../../assets/images/default/home-b.png":Ae,"../../assets/images/default/hotel.png":Me,"../../assets/images/default/lecturer.png":Se,"../../assets/images/default/line.png":Be,"../../assets/images/default/listmenu.png":Ne,"../../assets/images/default/live.png":Ge,"../../assets/images/default/menu.png":Ue,"../../assets/images/default/note.png":He,"../../assets/images/default/notice.png":ze,"../../assets/images/default/otherGoods,three.png":Ke,"../../assets/images/default/otherGoods,three2.png":qe,"../../assets/images/default/otherGoods,three3.png":Fe,"../../assets/images/default/picture.png":Je,"../../assets/images/default/pictures.png":Qe,"../../assets/images/default/presell.png":We,"../../assets/images/default/richtext.png":Xe,"../../assets/images/default/room.png":Ye,"../../assets/images/default/search.png":Ze,"../../assets/images/default/seckill.png":et,"../../assets/images/default/tabbar.png":tt,"../../assets/images/default/title.png":st,"../../assets/images/default/title3.png":at,"../../assets/images/default/twoGoods,list2.png":ot,"../../assets/images/default/twoGoods,two.png":nt,"../../assets/images/default/video.png":lt,"../../assets/images/default/wxlive.png":it})[`../../assets/images/default/${g||"course.png"}`],import.meta.url).href};return(n,g)=>(p(),v("div",Gt,[a("div",Ut,[a("p",Ht,[a("img",{src:t(e.activeItem.name),alt:""},null,8,zt),S(" "+C(e.activeItem.title),1)]),T(s).category!=="BOTTOM_MENU"?(p(),v(M,{key:0},[a("p",{class:"pointer btn",onClick:g[0]||(g[0]=r=>i("copy"))},Ft),a("p",{class:"pointer btn",onClick:g[1]||(g[1]=r=>i("delete"))},Wt)],64)):mt("",!0)]),a("div",Xt,[(p(),J(Q(e.activeItem.configComponent||Nt),{config:e.activeItem.config},null,8,["config"]))])]))}},Zt=D(Yt,[["__scopeId","data-v-cf49f297"]]),{materialDatas:K}=gt();function es(e,m,o){return W(),{initData:async(t,n)=>{if(e.value.id=n,e.value.category=t,!n)if(["BOTTOM_MENU","HOME_ADVERT"].includes(t)){const _={BOTTOM_MENU:[{name:"tabbar"}],HOME_ADVERT:[{name:"advert"}]};m.value=_[t].map(f=>{let b=K[f.name];return b.config=Object.assign({},b.defConfig,f.config||{}),b}),o.value=0;return}else return;let{category:g,sourceType:r,templateTitle:u,templateName:k,templateImg:O,backgroundColor:w,searchKey:L,templateConfigParams:j,componentIds:P}=await kt(n),l=JSON.parse(j).map(_=>{let f=I(_.config),b=K[_.name],V=I(b.defConfig);return Et(V,f),b.config=V,b});console.log("testData",l),m.value=l,e.value.category=g,e.value.sourceType=r,e.value.templateName=k,e.value.templateTitle=u,e.value.templateImg=O,e.value.backgroundColor=w,e.value.searchKey=L,e.value.componentIds=P,["BOTTOM_MENU","HOME_ADVERT"].includes(g)&&(o.value=0)},submitData:async()=>{let t=m.value.map(({name:g,title:r,config:u})=>({name:g,title:r,config:u})),n={...e.value};n.templateConfigParams=JSON.stringify(t),await yt(n),X({type:"success",message:"保存成功"})}}}const ts=e=>(N("data-v-2a76412e"),e=e(),G(),e),ss={class:"wrapper"},as={class:"wrapper-header"},os=ts(()=>a("div",{class:"flex-1"},null,-1)),ns={__name:"index",setup(e){const m=ft(),o=W(),i=x({id:"",category:"HOME",sourceType:"MARKET_APPLETS",templateName:"页面名称",templateTitle:"页面标题",templateImg:"https://img0.baidu.com/it/u=3773090653,2338589126&fm=253&fmt=auto&app=138&f=JPEG?w=750&h=500",backgroundColor:"#ffffff",searchKey:"首页",templateConfigParams:"[]",componentIds:""});ct("baseInfo",i.value);const s=x([]),t=x(-1),n=rt(()=>s.value[t.value]||{title:"全局设置",isGlobal:!0,config:i.value}),{initData:g,submitData:r}=es(i,s,t),u=l=>{if(l.name==="floatButtons"&&s.value.some(f=>f.name==="floatButtons"))return X({message:`${l.title}组件只能添加一个`,type:"warning"});let _=I(l);_.config=I(_.defConfig),t.value===-1?(s.value.push(_),t.value=s.value.length-1):(s.value.splice(t.value+1,0,_),t.value=t.value+1)},k=l=>t.value>=0,O=l=>{t.value=l.newIndex},w=l=>{t.value=l},L=()=>{let l=t.value;if(l===-1)return;let _=I(s.value[l]);s.value.splice(l+1,0,_),t.value+=1},j=async()=>{let l=t.value;if(l===-1)return;await vt.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})==="confirm"&&(s.value.splice(l,1),l>=s.value.length-1&&(t.value=s.value.length-1))},P=()=>o.back();return F(()=>{let{type:l,id:_=""}=m.query;const f=pt.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{g(l,_),f.close()},1e3)}),(l,_)=>{const f=E("ArrowLeft"),b=E("el-icon"),V=E("el-button");return p(),v("div",ss,[a("div",as,[a("div",{class:"left-back",onClick:P},[c(b,null,{default:h(()=>[c(f)]),_:1}),S("返回 ")]),os,c(V,{type:"primary",onClick:T(r)},{default:h(()=>[S("保存")]),_:1},8,["onClick"])]),c(Vt,{activeIndex:t.value,onAdd:u},null,8,["activeIndex"]),c(jt,{pageConfig:i.value,onSelect:_[1]||(_[1]=y=>w(-1))},{default:h(()=>[c(T(bt),{style:B({height:i.value.category==="advert"?"100%":"unset"}),modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=y=>s.value=y),move:k,onUpdate:O,"item-key":"index"},{item:h(({element:y,index:A})=>[a("div",null,[(p(),J(Q(y.componentName),{"item-key":A,class:ht({editing:!0,selected:A===t.value}),config:y.config,onClick:ls=>w(A)},null,8,["item-key","class","config","onClick"]))])]),_:1},8,["style","modelValue"])]),_:1},8,["pageConfig"]),c(Zt,{activeItem:n.value,onCopy:L,onDelete:j},null,8,["activeItem"])])}}},us=D(ns,[["__scopeId","data-v-2a76412e"]]);export{us as default};
