import{N as nt,r as w,O as B,o as G,e as r,f as p,F as A,g as S,k as o,t as k,P,l as D,Q as gt,d as b,h as m,w as f,y as M,A as N,s as U,v as H,q as L,i as K,j as q,b as F,E as _t,R as ut,S as mt,u as dt,B as ct,T as rt,n as pt}from"./index-DgSdXyB0.js";import{_ as J,a as z,b as Q,c as W,d as X,e as Y,f as Z,g as ee,h as te,i as se,j as ae,k as oe,l as le,m as ie,n as ne,o as ge,p as _e,q as ue,r as me,s as de,t as ce,u as re,v as pe,w as fe,x as ve,y as be,z as he,A as ye,B as Ee,C as ke,D as Ie,E as Ce,F as Te,G as we,H as De,I as Oe,J as xe,K as Ve,L as Re,M as je,N as $e,O as Le,P as Pe,Q as Ae,R as Se,S as Me,T as Ne,U as Be,V as Ge,W as Ue,X as He,Y as Ke,Z as qe,$ as Fe,a0 as Je,a1 as ze}from"./wxlive-qEk8kMXx.js";import{_ as Qe,a as We,b as Xe,c as Ye,d as Ze,e as et,f as tt,g as st}from"./default_video-Cx6B8j54.js";import{a as u,_ as I,d as $}from"./index-Do_uFhez.js";import{a as ft,b as vt}from"./diyPage-BNOUIa7J.js";const at=nt("common",()=>{const e=w({}),_=Object.assign({"../material/assistBlank/config.js":()=>u(()=>import("./config-6mH-mRtp.js"),[],import.meta.url),"../material/assistLine/config.js":()=>u(()=>import("./config-DVat-B7F.js"),[],import.meta.url),"../material/buttons/config.js":()=>u(()=>import("./config-DrHlRjc_.js"),[],import.meta.url),"../material/goods/config.js":()=>u(()=>import("./config-CxJB2L9T.js"),[],import.meta.url),"../material/goodsLikes/config.js":()=>u(()=>import("./config-CK8cCRCd.js"),[],import.meta.url),"../material/goodsRanking/config.js":()=>u(()=>import("./config-_Cn25R0W.js"),[],import.meta.url),"../material/goodsScore/config.js":()=>u(()=>import("./config-Cv6hX2YK.js"),[],import.meta.url),"../material/goodsTabbar/config.js":()=>u(()=>import("./config-amJqIolk.js"),[],import.meta.url),"../material/pictureShow/config.js":()=>u(()=>import("./config-DS27NU-V.js"),[],import.meta.url),"../material/search/config.js":()=>u(()=>import("./config-B-VjoYRn.js"),[],import.meta.url),"../material/singleChart/config.js":()=>u(()=>import("./config-CetF3cK4.js"),[],import.meta.url),"../material/swiper/config.js":()=>u(()=>import("./config-Bp-Thqmt.js"),[],import.meta.url),"../material/tabbar/config.js":()=>u(()=>import("./config-Bjxhfm_1.js"),[],import.meta.url),"../material/title/config.js":()=>u(()=>import("./config-CiNPRnwn.js"),[],import.meta.url),"../material/video/config.js":()=>u(()=>import("./config-DPJ3dUps.js"),[],import.meta.url)});return Object.keys(_).forEach(async a=>{let l=a.replace(/\/config.js/,"").replace(/.*\//,"");e.value[l]={name:l,componentName:"diy-"+l,configComponent:"conf-"+l,getDefaultConfig:_[a]}}),{materialDatas:e}}),ot=[{name:"商品类",data:[{name:"商品组",icon:"goods.png",component:"goods"},{name:"选项卡",icon:"tabbar.png",component:"goodsTabbar"},{name:"猜你喜欢",icon:"guess.png",component:"goodsLikes"},{name:"商品排行",icon:"goodsRanking.png",component:"goodsRanking"},{name:"积分商城",icon:"creditshop.png",component:"goodsScore"}]},{name:"图文类 ",data:[{name:"搜索框",icon:"search.png",component:"search"},{name:"图片轮播",icon:"banner.png",component:"swiper"},{name:"图片(热区)",icon:"picture.png",component:"singleChart"},{name:"图片展播",icon:"pictures.png",component:"pictureShow"},{name:"列表导航",icon:"listmenu.png",component:"buttons"},{name:"辅助线",icon:"line.png",component:"assistLine"},{name:"标题栏",icon:"title.png",component:"title"},{name:"辅助空白",icon:"blank.png",component:"assistBlank"},{name:"按钮组",icon:"menu.png",component:"buttons"},{name:"视频播放",icon:"video.png",component:"video"}]}],bt={class:"module-select-box"},ht={class:"module-list_type"},yt={class:"module-list_data"},Et=["onClick"],kt={class:"title"},It={__name:"materialPanel",emits:["add","global"],setup(e,{emit:_}){const{materialDatas:a}=at(),l=_;B("baseInfo");const s=t=>({backgroundImage:`url(${new URL(Object.assign({"../../assets/images/default/audio.png":J,"../../assets/images/default/banner.png":z,"../../assets/images/default/bannerGoods.png":Q,"../../assets/images/default/bargain.png":W,"../../assets/images/default/blank.png":X,"../../assets/images/default/car1.png":Y,"../../assets/images/default/car2.png":Z,"../../assets/images/default/car3.png":ee,"../../assets/images/default/car4.png":te,"../../assets/images/default/channelvideo.png":se,"../../assets/images/default/copyright.png":ae,"../../assets/images/default/countdown.png":oe,"../../assets/images/default/coupon.png":le,"../../assets/images/default/couponbag.png":ie,"../../assets/images/default/course.png":ne,"../../assets/images/default/creditshop.png":ge,"../../assets/images/default/creditsign.png":_e,"../../assets/images/default/cube.png":ue,"../../assets/images/default/default_banner.png":Qe,"../../assets/images/default/default_btn1.png":We,"../../assets/images/default/default_btn2.png":Xe,"../../assets/images/default/default_btn3.png":Ye,"../../assets/images/default/default_btn4.png":Ze,"../../assets/images/default/default_img.jpg":et,"../../assets/images/default/default_picture.png":tt,"../../assets/images/default/default_video.png":st,"../../assets/images/default/fixedsearch.png":me,"../../assets/images/default/float.png":de,"../../assets/images/default/form.png":ce,"../../assets/images/default/giftcard.png":re,"../../assets/images/default/goods,list.png":pe,"../../assets/images/default/goods,one.png":fe,"../../assets/images/default/goods.png":ve,"../../assets/images/default/goodsRanking.png":be,"../../assets/images/default/groups.png":he,"../../assets/images/default/groupscashback.png":ye,"../../assets/images/default/guess.png":Ee,"../../assets/images/default/guide.png":ke,"../../assets/images/default/home-b.png":Ie,"../../assets/images/default/hotel.png":Ce,"../../assets/images/default/lecturer.png":Te,"../../assets/images/default/line.png":we,"../../assets/images/default/listmenu.png":De,"../../assets/images/default/live.png":Oe,"../../assets/images/default/menu.png":xe,"../../assets/images/default/note.png":Ve,"../../assets/images/default/notice.png":Re,"../../assets/images/default/otherGoods,three.png":je,"../../assets/images/default/otherGoods,three2.png":$e,"../../assets/images/default/otherGoods,three3.png":Le,"../../assets/images/default/picture.png":Pe,"../../assets/images/default/pictures.png":Ae,"../../assets/images/default/presell.png":Se,"../../assets/images/default/richtext.png":Me,"../../assets/images/default/room.png":Ne,"../../assets/images/default/search.png":Be,"../../assets/images/default/seckill.png":Ge,"../../assets/images/default/tabbar.png":Ue,"../../assets/images/default/title.png":He,"../../assets/images/default/title3.png":Ke,"../../assets/images/default/twoGoods,list2.png":qe,"../../assets/images/default/twoGoods,two.png":Fe,"../../assets/images/default/video.png":Je,"../../assets/images/default/wxlive.png":ze})[`../../assets/images/default/${t}`],import.meta.url).href})`});return G(async()=>{if(Object.keys(a).some(t=>!a[t].title))for(const t in a){let n=(await a[t].getDefaultConfig()).default;a[t].title=n.title,a[t].defConfig=n,delete a[t].getDefaultConfig}}),(t,n)=>(r(),p("div",bt,[(r(!0),p(A,null,S(D(ot),(c,v)=>(r(),p("div",{class:"module-list",key:v},[o("div",ht,k(c.name)+"("+k(c.data.length)+")",1),o("div",yt,[(r(!0),p(A,null,S(c.data,(d,h)=>(r(),p("div",{class:"module-list_data_item",style:P(s(d.icon)),key:"c_"+h,onClick:C=>l("add",D(a)[d.component])},[o("p",kt,k(d.name),1)],12,Et))),128))])]))),128))]))}},Ct=I(It,[["__scopeId","data-v-f58a68e4"]]),Tt={class:"phone-wrapper"},wt={class:"diy-phone"},Dt={class:"phone_title"},Ot={__name:"renderEngine",props:{pageConfig:Object},emits:["select"],setup(e,{emit:_}){const a=_;return(l,s)=>(r(),p("div",Tt,[o("div",wt,[o("div",{class:"text-overflow phone-header",onClick:s[0]||(s[0]=t=>a("select"))},[o("div",Dt,k(e.pageConfig.templateTitle),1)]),o("div",{class:"custom-scroll-bar phone-body",style:P({"background-color":e.pageConfig.backgroundColor})},[gt(l.$slots,"default",{},void 0,!0)],4)])]))}},xt=I(Ot,[["__scopeId","data-v-06ef4988"]]),O=e=>(U("data-v-02575c21"),e=e(),H(),e),Vt=O(()=>o("div",{class:"module-edit-title"},"页面设置",-1)),Rt=O(()=>o("p",{class:"tips-info"},"注意：页面名称是便于后台查找。",-1)),jt=O(()=>o("div",{class:"tips-info",style:{margin:"-10px 0 10px 78px"}},"建议尺寸256 * 414 (大小建议不超过800k，以免影响加载速度)",-1)),$t=O(()=>o("div",{class:"diy-edit-line"},null,-1)),Lt={__name:"pageSet",props:{config:Object},setup(e){const _=e,a=()=>Bus.emit("selectImage",l=>_.config.images=l.url);return(l,s)=>{const t=b("el-input"),n=b("configItem"),c=b("selectColor"),v=b("el-image");return r(),p("div",null,[Vt,m(n,{label:"页面名称",style:{"margin-bottom":"20px"}},{default:f(()=>[m(t,{class:"flex-full",maxlength:12,modelValue:e.config.templateName,"onUpdate:modelValue":s[0]||(s[0]=d=>e.config.templateName=d),placeholder:"请输入页面名称"},null,8,["modelValue"]),Rt]),_:1}),m(n,{label:"页面标题"},{default:f(()=>[m(t,{class:"flex-full",modelValue:e.config.templateTitle,"onUpdate:modelValue":s[1]||(s[1]=d=>e.config.templateTitle=d),placeholder:"请输入页面标题"},null,8,["modelValue"])]),_:1}),m(n,{label:"页面背景"},{default:f(()=>[m(c,{modelValue:e.config.backgroundColor,"onUpdate:modelValue":s[2]||(s[2]=d=>e.config.backgroundColor=d),resetColor:"#ededed"},null,8,["modelValue"])]),_:1}),m(n,{label:"封面图",isRequire:!0},{default:f(()=>[o("div",{class:"upload-image",onClick:a},[M(m(v,{src:e.config.templateImg},null,8,["src"]),[[N,e.config.templateImg]]),M(o("span",null,"+",512),[[N,!e.config.templateImg]])])]),_:1}),jt,$t])}}},Pt=I(Lt,[["__scopeId","data-v-02575c21"]]),At={class:"diy-edit-box"},St={class:"header-info"},Mt={class:"title"},Nt=["src"],Bt={class:"custom-scroll-bar edit-config-module"},Gt={__name:"configPanel",props:{activeItem:Object},emits:["copy","delete"],setup(e,{emit:_}){let a=ot.reduce((s,t)=>[...s,...t.data],[]);B("baseInfo");const l=s=>{var n;let t=(n=a.filter(c=>c.component===s)[0])==null?void 0:n.icon;return new URL(Object.assign({"../../assets/images/default/audio.png":J,"../../assets/images/default/banner.png":z,"../../assets/images/default/bannerGoods.png":Q,"../../assets/images/default/bargain.png":W,"../../assets/images/default/blank.png":X,"../../assets/images/default/car1.png":Y,"../../assets/images/default/car2.png":Z,"../../assets/images/default/car3.png":ee,"../../assets/images/default/car4.png":te,"../../assets/images/default/channelvideo.png":se,"../../assets/images/default/copyright.png":ae,"../../assets/images/default/countdown.png":oe,"../../assets/images/default/coupon.png":le,"../../assets/images/default/couponbag.png":ie,"../../assets/images/default/course.png":ne,"../../assets/images/default/creditshop.png":ge,"../../assets/images/default/creditsign.png":_e,"../../assets/images/default/cube.png":ue,"../../assets/images/default/default_banner.png":Qe,"../../assets/images/default/default_btn1.png":We,"../../assets/images/default/default_btn2.png":Xe,"../../assets/images/default/default_btn3.png":Ye,"../../assets/images/default/default_btn4.png":Ze,"../../assets/images/default/default_img.jpg":et,"../../assets/images/default/default_picture.png":tt,"../../assets/images/default/default_video.png":st,"../../assets/images/default/fixedsearch.png":me,"../../assets/images/default/float.png":de,"../../assets/images/default/form.png":ce,"../../assets/images/default/giftcard.png":re,"../../assets/images/default/goods,list.png":pe,"../../assets/images/default/goods,one.png":fe,"../../assets/images/default/goods.png":ve,"../../assets/images/default/goodsRanking.png":be,"../../assets/images/default/groups.png":he,"../../assets/images/default/groupscashback.png":ye,"../../assets/images/default/guess.png":Ee,"../../assets/images/default/guide.png":ke,"../../assets/images/default/home-b.png":Ie,"../../assets/images/default/hotel.png":Ce,"../../assets/images/default/lecturer.png":Te,"../../assets/images/default/line.png":we,"../../assets/images/default/listmenu.png":De,"../../assets/images/default/live.png":Oe,"../../assets/images/default/menu.png":xe,"../../assets/images/default/note.png":Ve,"../../assets/images/default/notice.png":Re,"../../assets/images/default/otherGoods,three.png":je,"../../assets/images/default/otherGoods,three2.png":$e,"../../assets/images/default/otherGoods,three3.png":Le,"../../assets/images/default/picture.png":Pe,"../../assets/images/default/pictures.png":Ae,"../../assets/images/default/presell.png":Se,"../../assets/images/default/richtext.png":Me,"../../assets/images/default/room.png":Ne,"../../assets/images/default/search.png":Be,"../../assets/images/default/seckill.png":Ge,"../../assets/images/default/tabbar.png":Ue,"../../assets/images/default/title.png":He,"../../assets/images/default/title3.png":Ke,"../../assets/images/default/twoGoods,list2.png":qe,"../../assets/images/default/twoGoods,two.png":Fe,"../../assets/images/default/video.png":Je,"../../assets/images/default/wxlive.png":ze})[`../../assets/images/default/${t||"course.png"}`],import.meta.url).href};return(s,t)=>(r(),p("div",At,[o("div",St,[o("p",Mt,[o("img",{src:l(e.activeItem.name),alt:""},null,8,Nt),L(" "+k(e.activeItem.title),1)])]),o("div",Bt,[(r(),K(q(e.activeItem.configComponent||Pt),{config:e.activeItem.config},null,8,["config"]))])]))}},Ut=I(Gt,[["__scopeId","data-v-61129b33"]]),{materialDatas:Ht}=at();function Kt(e,_,a){return F(),{initData:async(t,n)=>{if(e.value.id=n,e.value.category=t,!n)if(["BOTTOM_MENU","HOME_ADVERT"].includes(t)){const i={BOTTOM_MENU:[{name:"tabbar"}],HOME_ADVERT:[{name:"advert"}]};_.value=i[t].map(g=>{let y=Ht[g.name];return y.config=Object.assign({},y.defConfig,g.config||{}),y}),a.value=0;return}else return;let{category:c,sourceType:v,templateTitle:d,templateName:h,templateImg:C,backgroundColor:T,searchKey:x,templateConfigParams:V,componentIds:R}=await ft(n);_.value=JSON.parse(V),e.value.category=c,e.value.sourceType=v,e.value.templateName=h,e.value.templateTitle=d,e.value.templateImg=C,e.value.backgroundColor=T,e.value.searchKey=x,e.value.componentIds=R,["BOTTOM_MENU","HOME_ADVERT"].includes(c)&&(a.value=0)},submitData:async()=>{let t={...e.value};t.templateConfigParams=JSON.stringify(_.value),await vt(t),_t({type:"success",message:"保存成功"})}}}const qt=e=>(U("data-v-087a94b8"),e=e(),H(),e),Ft={class:"wrapper"},Jt={class:"wrapper-header"},zt=qt(()=>o("div",{class:"flex-1"},null,-1)),Qt={__name:"index",setup(e){const _=dt(),a=F(),l=w({id:"",category:"HOME",sourceType:"MARKET_APPLETS",templateName:"页面名称",templateTitle:"页面标题",templateImg:"https://img0.baidu.com/it/u=3773090653,2338589126&fm=253&fmt=auto&app=138&f=JPEG?w=750&h=500",backgroundColor:"#ffffff",searchKey:"首页",templateConfigParams:"[]",componentIds:""});ut("baseInfo",l.value);const s=w([]),t=w(-1),n=mt(()=>s.value[t.value]||{title:"全局设置",isGlobal:!0,config:l.value}),{initData:c,submitData:v}=Kt(l,s,t),d=i=>{let g=$(i);g.config=$(g.defConfig),t.value===-1?(s.value.push(g),t.value=s.value.length-1):(s.value.splice(t.value+1,0,g),t.value=t.value+1)},h=i=>t.value>=0,C=i=>{t.value=i.newIndex},T=i=>{t.value=i},x=()=>{let i=t.value;if(i===-1)return;let g=$(s.value[i]);s.value.splice(i+1,0,g),t.value+=1},V=async()=>{let i=t.value;if(i===-1)return;await ct.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})==="confirm"&&(s.value.splice(i,1),i>=s.value.length-1&&(t.value=s.value.length-1))},R=()=>a.back();return G(()=>{let{type:i,id:g=""}=_.query;setTimeout(()=>{c(i,g)},500)}),(i,g)=>{const y=b("ArrowLeft"),lt=b("el-icon"),it=b("el-button");return r(),p("div",Ft,[o("div",Jt,[o("div",{class:"left-back",onClick:R},[m(lt,null,{default:f(()=>[m(y)]),_:1}),L("返回 ")]),zt,m(it,{type:"primary",onClick:D(v)},{default:f(()=>[L("保存")]),_:1},8,["onClick"])]),m(Ct,{activeIndex:t.value,onAdd:d},null,8,["activeIndex"]),m(xt,{pageConfig:l.value,onSelect:g[1]||(g[1]=E=>T(-1))},{default:f(()=>[m(D(rt),{style:P({height:l.value.category==="advert"?"100%":"unset"}),modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=E=>s.value=E),move:h,onUpdate:C,"item-key":"index"},{item:f(({element:E,index:j})=>[o("div",null,[(r(),K(q(E.componentName),{"item-key":j,class:pt({editing:!0,selected:j===t.value}),config:E.config,onClick:Wt=>T(j)},null,8,["item-key","class","config","onClick"]))])]),_:1},8,["style","modelValue"])]),_:1},8,["pageConfig"]),m(Ut,{activeItem:n.value,onCopy:x,onDelete:V},null,8,["activeItem"])])}}},ss=I(Qt,[["__scopeId","data-v-087a94b8"]]);export{ss as default};
